var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,a=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))o.call(t,n)&&i(e,n,t[n]);return e},c=(e,r)=>t(e,n(r)),l=(e,t)=>{var n={};for(var i in e)s.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&r)for(var i of r(e))t.indexOf(i)<0&&o.call(e,i)&&(n[i]=e[i]);return n};import{e as u,S as h,C as d,u as m,l as p,a as g,R as f,r as w,L as y,f as b,m as v,b as E,d as x,O as k,c as $,i as C,g as S,h as N,j as A,k as T,B as P}from"./vendor.fe962cd3.js";const R=navigator.userAgent||navigator.vendor||window.opera,O=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(R)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(R.substr(0,4)),j=(e,t)=>e.w===t.w&&e.h===t.h,I=(e,t)=>e.w===t.w&&e.h>t.h,D={w:window.innerWidth,h:window.innerHeight};let L={w:window.innerWidth,h:window.innerHeight},F={w:window.innerWidth,h:window.innerHeight},q=!1;const M=u(),U=M.subscribe;function H(e){q!==e&&(q=e,M(e))}O&&window.addEventListener("resize",(()=>{L=F,F={w:window.innerWidth,h:window.innerHeight},(j(F,D)&&I(F,L)||j(L,D)&&I(L,F))&&H(!1)}));const z=new Set;let _=!1;const G=u(),W=G.subscribe;function B(e){const t=function(){const e={};return z.add(e),V(),()=>{z.delete(e),V()}}();return e.finally(t)}function V(){const e=Boolean(z.size);e!==_&&(_=e,G(e))}function J(e,t={}){const n="body"in t&&"string"!=typeof t.body?JSON.stringify(t.body):t.body,r=c(a({},t),{body:n});return B(fetch(e,r).then((e=>Promise.all([e,e.text()]))).then((([t,n])=>(function(e,t,n){const r=Math.floor(e/100);let s=X[e];if(console.debug(`HTTP[${e} ${s}]: ${t}`),r<4)return;s||(4===r?s="Unknown client error":5===r&&(s="Unknown server error"));throw new Q(e,s||"Unknown status",n)}(t.status,e,n),function(e){const t=e.headers.get("content-type");return!!t&&t.toLowerCase().includes("application/json")}(t)?JSON.parse(n):n))))}const K=(e,t=null,n={})=>J(e,a({method:"POST",body:t},n));class Q extends Error{constructor(e,t,n){super(`${e}: ${t}`),this.status=e,this.body=n}}const X={100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};function Y(e){const t=`https://api.github.com${e}`,n=`p=${Date.now()}`;return t.includes("?")?`${t}&${n}`:`${t}?${n}`}function Z(e){return{Authorization:`token ${e}`}}class ee{constructor(e){this.token=e}send(e,t){const n={query:this.buildQuery(e,t),variables:t},r=Z(this.token);return K(Y("/graphql"),n,{headers:r}).then((e=>{const{errors:t}=e;return t&&console.error("GraphQL errors:",t),e}))}buildQuery(e,t){const n=Object.keys(t);if(!n.length)return`query {${e}}`;return`query(${n.map((e=>`$${e}: String!`)).join(", ")}) {${e}}`}}var te,ne;(ne=te||(te={})).Json="application/vnd.github.v3+json",ne.Raw="application/vnd.github.v3.raw",ne.Html="application/vnd.github.v3.html";class re{constructor(e){this.token=e}GET(e,t){return((e,t={})=>J(e,t))(Y(e),this.withAuth(t))}DELETE(e){return((e,t={})=>J(e,a({method:"DELETE"},t)))(Y(e),this.withAuth())}PUT(e,t){return((e,t=null,n={})=>J(e,a({method:"PUT",body:t},n)))(Y(e),t,this.withAuth())}POST(e,t){return K(Y(e),t,this.withAuth())}PATCH(e,t){return((e,t=null,n={})=>J(e,a({method:"PATCH",body:t},n)))(Y(e),t,this.withAuth())}withAuth({mediaType:e=te.Json}={}){return{headers:c(a({},Z(this.token)),{Accept:e})}}}const se={has_issues:!1,has_projects:!1,has_wiki:!1,auto_init:!0,allow_merge_commit:!0,allow_squash_merge:!1,allow_rebase_merge:!1,delete_branch_on_merge:!1,has_downloads:!1,is_template:!1};class oe{constructor(e,t,n){this.token=e,this.owner=t,this.name=n,this.commiting=!1,this.branch="main",this.rest=new re(e),this.gql=new ee(e)}get url(){return`/repos/${this.owner}/${this.name}`}get isCommiting(){return this.commiting}exists(){return this.rest.GET(this.url).then((()=>!0),(()=>!1))}async create(e,t){try{await this.rest.POST("/user/repos",a({name:this.name,description:e,homepage:"",private:t,visibility:t?"private":"public"},se))}catch(n){throw console.error(n),n}}async createIfNecessary(e,t){return!(await this.exists())&&(await this.create(e,t),!0)}async readDir(e){const t=e.replace(/^\*|\*$/g,""),{data:{repository:{files:n}}}=await this.gql.send("\n    repository(owner: $owner, name: $repo) {\n      files: object(expression: $path) {\n        ... on Tree {\n          entries {\n            path\n            object {\n              ... on Blob {\n                text\n              }\n            }\n          }\n        }\n      }\n    }\n  ",this.getFileVars(t));return n?n.entries.map((e=>[e.path,e.object.text])):[]}async getReadme(){return this.rest.GET(`${this.url}/readme`,{mediaType:te.Raw})}async readFile(e){const t=await this.rest.GET(`${this.url}/contents/${e}`,{mediaType:te.Raw});if(Array.isArray(t))throw new Error(`${this.url}/${e} is a directory`);return t}async writeFile(e,t,n){await this.rest.PUT(`${this.url}/contents/${e}`,{message:n,content:t})}commit(e,t,n=!1){const{owner:r,name:s,branch:o,token:i}=this,a={token:i,owner:r,repo:s,branch:o,files:t,message:e};return this.commiting=!0,K("https://pensieve.amatiasq.com/commit",a,{keepalive:n}).finally((()=>this.commiting=!1))}async readFileCool(e,t){return this.gql.send(function(e){return`\n    repository(owner: $owner, name: $repo) {\n      object(expression: $path) {\n        ... on Blob {\n          ${e}\n        }\n      }\n    }\n  `}(t),this.getFileVars(e)).then((e=>{var t;return null==(t=e.data.repository.file)?void 0:t.text}))}getFileVars(e){return{owner:this.owner,repo:this.name,path:`${this.branch}:${e}`}}}let ie=0;const ae=Boolean(localStorage.getItem("debug"));function ce(e,t,n){if(!ae)return;const r=e.constructor.name;t.forEach((t=>{const s=e[t];e[t]=(...o)=>{const i="  ".repeat(ie++),a=n?` [${n}]`:"";console.debug(`${i}🟢 ${r}.${t}${a}`,o[0]);const c=s.apply(e,o);return console.debug(`${i}🔴 ${r}.${t}${a}`),ie--,c}}))}class le{constructor(e){this.duration=e,this.data=new Map,this.time=new Map}has(e){const t=this.time.get(e);if(null==t)return!1;const n=(Date.now()-t)/1e3>this.duration;return n&&(this.time.delete(e),this.data.delete(e)),!n}get(e){return this.data.get(e)}set(e,t){this.time.set(e,Date.now()),this.data.set(e,t)}}class ue{constructor(e,t,n){this.store=e,this.seconds=t,this.readAllCache=new le(this.seconds),this.cache=new le(this.seconds),ce(this,["readAll","read","write","delete"],n)}has(e){return this.store.has(e)}readAll(e){if(this.readAllCache.has(e))return this.readAllCache.get(e);const t=this.store.readAll(e);return this.readAllCache.set(e,t),t}read(e){if(this.cache.has(e))return this.cache.get(e);const t=this.store.read(e);return this.cache.set(e,t),t}write(e,t,n){return this.cache.set(e,Promise.resolve(t)),this.store.write(e,t,n)}delete(e,t){return this.cache.set(e,Promise.resolve(null)),this.store.delete(e,t)}}class he{constructor(e){this.forage=e,this.keys=null,ce(this,["readAll","read","write","delete"])}async has(e){const t=this.keys||await this.forage.keys();return this.keys||(this.keys=t,setTimeout((()=>this.keys=null),3e3)),t.includes(e)}async readAll(e){const t=function(e){const t=e.startsWith("*")?"":"^",n=e.endsWith("*")?"":"$",r=e.replace(/^\*|\*$/g,"");return new RegExp(`${t}${r}${n}`)}(e),n=(await this.forage.keys()).filter((e=>t.test(e))).map((async e=>[e,await this.read(e)])),r=(await Promise.all(n)).filter((e=>e[1]));return Object.fromEntries(r)}read(e){return this.forage.getItem(e)}async write(e,t){await this.forage.setItem(e,t)}async delete(e){await this.forage.removeItem(e)}}function de(e,t){return{urgent:e&&e.urgent||!1,reason:e&&e.reason||t}}class me{constructor(e){this.repo=e,this.scheduler=new h(100,(()=>this.push())),this.pending=[],ce(this,["readAll","read","write","delete"])}has(e){throw new Error("Do not use me")}async readAll(e){const t=await this.repo.readDir(e);return Object.fromEntries(t)}read(e){return this.repo.readFile(e)}write(e,t,n){const{urgent:r,reason:s}=de(n,`Update ${e}`);return this.commit(s,{[e]:t},r)}async delete(e,t){const{urgent:n,reason:r}=de(t,`Remove ${e}`);await this.commit(r,{[e]:null},n)}commit(e,t,n){if(!Object.keys(t).length)throw new Error("NO FILES TO COMMIT");return new Promise(((r,s)=>{this.pending.push({message:e,files:t,resolve:r,reject:s}),n?this.push(!0):this.scheduler.restart()}))}push(e=!1){if(this.repo.isCommiting)return void this.scheduler.restart();if(!this.pending.length)return;const t=[...this.pending];this.pending.length=0;const n=t.reduce(((e,t)=>a(a({},e),t.files)),{}),r=(s=t.map((e=>e.message)),Array.from(new Set(s)));var s;const o=r.length>1?`Multiple:\n- ${r.join("\n- ")}`:r[0];this.repo.commit(o,n,e).then((()=>t.forEach((e=>e.resolve()))),(e=>t.forEach((t=>t.reject(e)))))}}class pe{constructor(e,t){this.local=e,this.remote=t,ce(this,["readAll","read","write","delete"])}has(e){throw new Error("Do not use me")}localHas(e){return this.local.has(e)}readAll(e){return this.readAllRemote(e).catch((()=>this.readAllLocal(e)))}async readAllRemote(e){const[t,n]=await Promise.all([this.local.readAll(e),this.remote.readAll(e)]),r=Object.keys(t).filter((e=>!(e in n))).map((e=>this.local.delete(e))),s=Object.keys(n).filter((e=>n[e]!==t[e])).map((e=>this.local.write(e,n[e])));return Promise.all(s).then((()=>console.log(`${r.length} notes removed from local and ${s.length} updated`))),n}readAllLocal(e){return this.local.readAll(e)}read(e){return this.remote.read(e).then((t=>this.updateOffline(e,t)),(()=>this.local.read(e)))}readRemote(e){return this.remote.read(e).then((t=>this.updateOffline(e,t)))}readLocal(e){return this.local.read(e)}async write(e,t,n){await Promise.race([this.local.write(e,t,n),this.remote.write(e,t,n)])}async delete(e,t){await Promise.race([this.local.delete(e,t),this.remote.delete(e,t)])}deleteLocal(e){this.local.delete(e)}updateOffline(e,t){return null==t?this.local.delete(e):this.local.write(e,t),t}}class ge extends Error{}const fe=new d("pensieve.pending-commands",{default:[]}),we=e=>fe.set([...fe.cache,e]);class ye{constructor(e){this.remote=e,this.reading=new Map,this.reconnect=new h(1e3,(()=>this.executePending())),window.addEventListener("online",(()=>this.executePending())),ce(this,["readAll","read","write","delete"])}get isOffline(){return!navigator.onLine}has(e){throw new Error("Do not use me")}readAll(e){return this.rejectIfOffline()||this.remote.readAll(e)}read(e){if(this.reading.has(e))return this.reading.get(e);if(this.isOffline)return Promise.reject((()=>new ge));const t=this.remote.read(e);return this.reading.set(e,t),t.finally((()=>this.reading.delete(e)))}write(e,t,n){return this.command("write",[e,t,n])}delete(e,t){return this.command("delete",[e,t])}rejectIfOffline(){if(this.isOffline)return Promise.reject(new ge)}command(e,t,n=0){if(this.isOffline)return we({method:e,params:t,attempts:n}),Promise.reject(new ge);return this.remote[e](...t).catch((r=>{throw we({method:e,params:t,attempts:n+1}),this.reconnect.restart(),r}))}executePending(){if(this.isOffline)this.reconnect.restart();else for(const{method:e,params:t,attempts:n}of(()=>{const e=[...fe.cache];return fe.reset(),e})())n<5?this.command(e,t,n):console.warn(`Command ${e} failed ${n} times`,...t)}}const be={},ve=m.v4();function Ee(e){const t=u();be[e]=t;return[t=>{setTimeout((()=>postMessage({id:ve,type:e,data:t},location.origin)),10)},t.subscribe]}function xe(e){return JSON.stringify(e,null,2)}function ke(e){const t=e.replace(/[^:]\/\/[^\n]+\n/g,"");try{return JSON.parse(t)}catch(n){const[e]=n.message.split(/\s/g).reverse();throw console.warn(`Error in JSON (${n.message}):\n${t.substr(e-100,200)}`),n}}function $e(e=new Date){return`${e.getFullYear()}-${Se(e.getMonth()+1)}-${Se(e.getDate())} ${Se(e.getHours())}:${Se(e.getMinutes())}:${Se(e.getSeconds())}`}function Ce(e){return new Date(e)}function Se(e){return e<10?`0${e}`:`${e}`}function Ne(e,t){return(null!=e&&null!=t||e===t)&&xe(e)===xe(t)}function Ae(e){const t=e.trim(),n=t.indexOf("\n"),r=-1===n?t:t.substr(0,n),s=function(e){const t=e.match(/(\.\w+)+$/);return t?t[0]:".md"}(r),o=function(e,t){const n=function(e){const t=function(e){return{".sql":"--",".md":"#",".sh":"#",".js":"//",".ts":"//",".cs":"//",".fs":"//"}[e]||"//"}(e);return new RegExp(`^\\s*(${t})+`)}(t);return e.trim().replace(n,"").trim()}(r,s),[i,a]=o.split("/").reverse().map((e=>e.trim()));return{title:i,group:a,extension:s,content:e}}window.addEventListener("message",(e=>{const t=be[e.data.type];"function"==typeof t&&(console.debug(`🚎 ${e.data.type}`,e.data.data),t(e.data.data))}));const Te={autosave:5,reloadIfAwayForSeconds:5,renderIndentGuides:!1,rulers:[],sidebarVisible:!0,sidebarWidth:400,starNewNotes:!0,tabSize:2,wordWrap:!0};function Pe(e,t){return xe(e)===xe(t)}const Re={"CTRL+TAB":"goBack","CTRL+SHIFT+TAB":"goForward","ALT+N":"toggleWordWrap","CMD+S":"save","CMD+,":"settings","CMD+B":"hideSidebar","CMD+W":"goHome","CMD+N":"newNote","CMD+SHIFT+E":"clearFilter","CTRL+S":"save","CTRl+,":"settings","CTRL+B":"hideSidebar","CTRL+W":"goHome","CTRL+N":"newNote"};function Oe(e,t,n,r=(()=>!0)){let s=!1,o=!1;return new Promise(((i,a)=>{t.finally((()=>o=!0)).then((e=>{s?n(e):i(e)}),(e=>{s&&a(e)})),e.then((e=>{r(e)&&(s=!0,i(e))}),(e=>{s=!0,o&&a(e)}))}))}class je{constructor(e,t,n){this.store=e,this.key=t,this.defaultValue=n}get isCached(){return this.store.localHas(this.key)}read(){return this.store.read(this.key).then((e=>e||this.defaultValue),(()=>this.defaultValue))}readAsap(e){const t=e=>e||this.defaultValue;return Oe(this.store.readLocal(this.key).then(t),this.store.readRemote(this.key).then(t),e)}write(e,t){const n=de(t,`Write ${this.key}`);return this.store.write(this.key,e,n)}delete(e){const t=de(e,`Delete ${this.key}`);return this.store.delete(this.key,t)}}class Ie extends je{constructor(e,t,n){super(e,t,xe(n)),this.defaultJson=n;const[r,s]=Ee(`json:changed:${t}`);this.emitChange=r,this.onChange=s}get(){return this.read().then((e=>e?ke(e):this.defaultJson)).catch((()=>this.defaultJson))}set(e,t){const n=xe(e),r=de(t,`Set ${this.key}`);return this.write(n,r)}async write(e,t){this.emitChange(ke(e)),await super.write(e,t)}}const De=()=>{},Le=new Map;class Fe{constructor(e,t,n){this.id=e,this.meta=t,this.content=n;const[r,s]=Ee(`note:title:${e}`),[o,i]=Ee(`note:deleted:${e}`),[a,c]=Ee(`note:changed:${e}`),[l,u]=Ee(`note:content-changed:${e}`);if(Le.has(e))throw new Error(`Created RemoteNote twice with same id: ${e}`);this.emitChange=a,this.emitContentChange=l,this.emitDelete=o,this.emitDraft=r,this.onChange=c,this.onContentChange=u,this.onDelete=i,this.onDraft=s}get title(){const e=this.get();return e?e.title:"(unknown)"}get hasCachedContent(){return Promise.resolve(!0)}getCache(){return Le.get(this.id)||null}get(){return this.getCache()}async delete(e){const t=de(e,`Delete note "${this.title}"`);await Promise.all([this.meta.delete(t).catch(De),this.content.delete(t).catch(De)]),this.emitDelete()}draft(e){const t=this.getCache();if(!t)return;const{title:n,group:r}=Ae(e);this.emitDraft(c(a({},t),{title:n,group:r}))}async read(){localStorage.getItem("URGENT_SAVE")===this.id&&(localStorage.removeItem("URGENT_SAVE"),await new Promise((e=>setTimeout(e,500))));const e=await this.content.readAsap((e=>{this.updateFromContent(e),this.emitContentChange(e)}));return e&&this.updateFromContent(e),e}async write(e,t){t&&t.urgent&&localStorage.setItem("URGENT_SAVE",this.id);const{title:n}=Ae(e),r=de(t,`Update note "${this.title}"${n!==this.title?` renamed "${n}"`:""}`);await Promise.all([this.updateFromContent(e,r),this.content.write(e,r)]),this.emitContentChange(e)}setGroup(e,t){const n=de(t,`Add note to group "${e}"`);return this.update((t=>c(a({},t),{group:e})),n)}toggleFavorite(e){const t=de(e,`Toggle "${this.title}" favorite`);return this.update((e=>c(a({},e),{favorite:!e.favorite})),t)}async push(e){const{id:t}=this;if(e.id!==t)throw new Error(`Pushing note with id ${e.id} into RemoteNote with id ${t}`);const n=!Ne(this.getCache(),e);Le.set(t,e),n&&this.emitChange(e)}async update(e,t){const n=await this.meta.get(),r=e(n),s=$e();return Ne(c(a({},n),{modified:s}),c(a({},r),{modified:s}))||(await this.meta.set(r,t),this.emitChange(r)),r}async updateFromContent(e,t){const{title:n,group:r}=Ae(e),s=await this.update((e=>c(a({},e),{title:n,group:r,modified:$e()})),t);return Le.set(this.id,s),s}}const qe=e=>`meta/${e}.json`,Me=e=>`note/${e}`,Ue=e=>e.trim().replace(/,$/,"");class He{constructor(e){this.store=e,this.notes=new Map,this.settings=new Ie(this.store,"settings.json",Te),this.shortcuts=new Ie(this.store,"shortcuts.json",Re);const[t,n]=Ee("notes-created");this.emitNotesCreate=t,this.onNotesCreated=n}async all(){const e="meta/*",t=e=>t=>(console.log(`Notes found in ${e}`,Object.keys(t).length),t);return Oe(this.store.readAllLocal(e).then(t("local")),this.store.readAllRemote(e).then(t("remote")),(e=>this.synchronize(e)),(e=>Boolean(Object.keys(e).length))).then((e=>Object.values(e).map((e=>{const t=ke(Ue(e));return this.updateRemote(t.id,t),t}))))}synchronize(e){const t=[],n=new Set(...this.notes.keys());for(const[,r]of Object.entries(e)){const e=ke(Ue(r)),s=n.delete(e.id);this.note(e.id).push(e),s||t.push(e)}t.length&&this.emitNotesCreate(t);for(const r of n)this.store.deleteLocal(qe(r)),this.store.deleteLocal(Me(r))}note(e){return this.notes.has(e)?this.notes.get(e):this.createRemote(e,c(a({},ze("")),{id:e}))}create(e){const t=ze(e),{id:n}=t,r=this.createRemote(n,t),s=`Create note "${t.title}"`;return Promise.all([this.store.write(qe(n),xe(t),{reason:s}),r.write(e,{reason:s})]),this.emitNotesCreate([t]),r}updateRemote(e,t){if(!this.notes.get(e))return this.createRemote(e,t);const n=this.notes.get(e);return n.push(t),n}createRemote(e,t){const n=new Fe(e,new Ie(this.store,qe(e),t),new je(this.store,Me(e),""));return this.notes.set(e,n),n.push(t),n}}function ze(e){const{group:t,title:n}=Ae(e);return{id:m.v4(),title:n,group:t,favorite:!0,created:$e(),modified:$e()}}Object.assign(window,{localforage:p});class _e{constructor(e,t){this.history=e,this.path=t,this.root="/",this.settings="/settings",this.note="/note/:noteId",this.goRoot=()=>this.history.push(this.root),this.goSettings=()=>this.history.push(this.settings),this.toNote=We((e=>this.note.replace(":noteId",e))),this.goNote=We((e=>this.history.push(this.note.replace(":noteId",e)))),this.isNote=We((e=>this.path===this.note.replace(":noteId",e)))}onNavigate(e){return this.history.listen((t=>e(new _e(this.history,t.pathname))))}getPageName(){if("/"===this.path)return"home";const[,e]=this.path.split("/");return e}}function Ge(){const e=g();return new _e(e,e.location.pathname)}function We(e){return t=>e("string"==typeof t?t:t.id)}function Be(){return f.createElement("div",{className:"loader"},f.createElement("div",{className:"container"},f.createElement("div",{className:"ripple"}),f.createElement("div",{className:"ripple ripple2"})))}const Ve=w.exports.createContext(null);let Je=0;function Ke(){const e=Ge(),t=w.exports.useContext(Ve),[n,r]=w.exports.useState(!0),[s,o]=w.exports.useState([]);return w.exports.useEffect((()=>{n||r(!0),t.all().then(i)}),[]),w.exports.useEffect((()=>{const e=s.map((e=>t.note(e.id))),n=[t.onNotesCreated(a),...e.map((e=>e.onChange(c))),...e.map((e=>{return e.onDelete((t=e.id,()=>{o(s.filter((e=>e.id!==t)))}));var t}))];return()=>n.forEach((e=>e()))}),[s]),[s,{loading:n,createNote:function(){const n=t.create(`${$e()}.md\n`);e.goNote(n.id)}}];function i(e){if(i=e,(t=s).length!==i.length||!t.every(((e,t)=>Ne(e,i[t])))){const t=e.sort(((e,t)=>Number(Ce(t.created))-Number(Ce(e.created))));o(t)}var t,i;n&&r(!1)}function a(e){const t=e.map((e=>e.id)),n=s.filter((e=>!t.includes(e.id)));i([...e,...n])}function c(e){const{id:t}=e,n=s.findIndex((e=>e.id===t));if(-1===n)throw new Error(`Unknown note updated: ${t}`);i([...s.slice(0,n),e,...s.slice(n+1)])}}const Qe=new d("pensieve.settings-hook",{version:1});function Xe(e){const[t,n,r]=function(){const e=w.exports.useContext(Ve),[t,n]=w.exports.useState(!0),[r,s]=w.exports.useState(Qe.cache||Te);return w.exports.useEffect((()=>(e.settings.get().then(o),e.settings.onChange(o))),[]),[r,async function(t){Pe(t,r)||(Qe.set(t),n(!0),s(t),await e.settings.set(t),n(!1))},{loading:t}];function o(e){Pe(e,r)||(Qe.set(e),s(e)),t&&n(!1)}}(),s=t[e],[,o]=w.exports.useState(s);return w.exports.useEffect((()=>{o(s);const t="boolean"!=typeof s?s:s?1:0;document.documentElement.style.setProperty(`--setting-${e}`,`${t}`)}),[xe(s)]),[s,function(r){xe(s)!==xe(r)&&n(c(a({},t),{[e]:r}))},r]}Qe.get();const Ye={Meta:"META",Shift:"SHIFT",Alt:"ALT",Control:"CTRL"},Ze={" ":"Space"},et=u(),tt=et.subscribe;O||document.addEventListener("keydown",(function(e){const t=[];e.metaKey&&t.push("META");e.ctrlKey&&t.push("CTRL");e.altKey&&t.push("ALT");e.shiftKey&&t.push("SHIFT");if(e.key in Ye)return;const n=function(e){return e in Ze?Ze[e]:e}(e.key);et({key:e.key,keys:[...t.sort(),n],preventDefault:()=>e.preventDefault()})}),!0);const nt={};let rt=!1;function st(e,t){const n=nt[e],r=w.exports.useContext(Ve);w.exports.useEffect((()=>(nt[e]=t,()=>{nt[e]=n}))),rt||function(e){let t=ot(Re);const n=e=>t=ot(e);e.shortcuts.get().then(n),e.shortcuts.onChange(n),tt((e=>{const n=e.keys.join("+").toUpperCase();if(e.keys.length>1&&console.log(n),n in t){const r=t[n],s=nt[r]||null;console.log("Shortcut received",{keys:n,commandName:r,command:s}),"function"==typeof s&&(e.preventDefault(),s())}})),rt=!0}(r)}function ot(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>{return[(n=e,n.toUpperCase().replace(/CMD|WINDOWS|WIN/,"META")),t];var n})))}function it(e){return f.createElement("button",a({type:"button",role:"button"},e))}function at({name:e,prefix:t="fas",className:n}){const[r,s]=e.includes(" ")?e.split(" "):[t,e];return f.createElement("i",{className:`${r} fa-${s} ${n||""}`})}function ct(e){const t=e,{icon:n,className:r}=t,s=l(t,["icon","className"]),o=`icon-button ${r||""}`;return f.createElement(it,c(a({},s),{className:o}),f.createElement(at,{name:n}))}function lt(e){const[t,n]=w.exports.useState(!1),[r,s]=w.exports.useState(e.size),[o,i]=w.exports.useState([0,0]);return f.createElement("div",{className:"resizer",draggable:!0,onDragStart:e=>{n(!0),s(e.clientX),i([0,0])},onDrag:e=>{t&&i([o[1],e.clientX-r])},onDragEnd:()=>{const t=r+o[0];n(!1),s(t),e.onChange(t)}})}function ut(e,t){const[n]=w.exports.useState({callback:t}),[r]=w.exports.useState(new h(e,(()=>n.callback())));return n.callback=t,r}const ht=/\s+/g;class dt{constructor(e){this.clean=mt(e)}fullMatch(e){return mt(e)===this.clean}matches(e){return!this.clean||mt(e).includes(this.clean)}matchesAny(e){return e.filter(Boolean).some((e=>this.matches(e)))}}function mt(e){return e.toLowerCase().replace(ht,"")}function pt({onChange:e}){const t=w.exports.createRef(),[n,r]=w.exports.useState(""),s=ut(50,(()=>e(n?new dt(n):null)));return st("clearFilter",(()=>o(""))),f.createElement(f.Fragment,null,f.createElement("input",{ref:t,className:"filter-box",type:"text",placeholder:"Filter...",defaultValue:n,onChange:e=>o(e.target.value)}),n?f.createElement(ct,{icon:"times",onClick:()=>o("")}):null);function o(e){t.current&&(t.current.value=e),r(e),s.restart()}}function gt(e){const t=w.exports.useContext(Ve),n=t.note(e),[r,s]=w.exports.useState(n.get()),[o,i]=w.exports.useState(!r);return w.exports.useEffect((()=>{const e=n.get();e?a(e):i(!0);const t=[n.onChange(a),n.onDraft(a)];return()=>t.forEach((e=>e()))}),[e]),[r,{loading:o,toggleFavorite:()=>t.note(e).toggleFavorite(),remove:()=>t.note(e).delete(),draft:n=>t.note(e).draft(n)}];function a(e){Ne(e,r)||s(e),o&&i(!1)}}function ft({id:e}){const t=Ge(),[n,{toggleFavorite:r,remove:s}]=gt(e),[o,i]=w.exports.useState(t.isNote(e));if(w.exports.useEffect((()=>t.onNavigate((t=>{const n=t.isNote(e);(o||n)&&i(n)})))),!n)return null;const l=["note-item",n.favorite?"favorite":"",o?"active":""],u=n.group?{"data-group":n.group}:{};return f.createElement(y,c(a({className:l.join(" ")},u),{to:t.toNote(n)}),f.createElement("div",{className:"star-part"},f.createElement(ct,{icon:n.favorite?"star":"far star",onClick:function(e){e.preventDefault(),r()}})),f.createElement("h5",{className:"title-part"},n.title),f.createElement("div",{className:"actions-part"},f.createElement(ct,{icon:"trash",onClick:function(r){if(!confirm(`Delete ${n.title}?`))return;r.preventDefault(),t.isNote(e)&&t.goRoot();return s()}})))}const wt=e=>`group-open:${e}`;function yt({group:e,notes:t}){const n=e=>t.some((t=>e.isNote(t))),r=(e=>Boolean(localStorage[wt(e)]))(e),s=Ge(),[o,i]=w.exports.useState(n(s));w.exports.useEffect((()=>s.onNavigate((e=>{const t=n(e);o!==t&&i(t)}))));const a=t.filter((e=>e.favorite)),c=["group",o?"has-active":"",a.length?"has-favorite":""];return f.createElement("details",{className:c.join(" "),"data-group":e,open:r},f.createElement("summary",{className:"group-title",onClick:bt},f.createElement(at,{name:"angle-right",className:"icon-button group-caret"}),f.createElement("span",{className:"group-name"},e),a.length?f.createElement(f.Fragment,null,f.createElement("i",{className:"fav-counter"},a.length)," /"):null,f.createElement("i",{className:"counter"},t.length)),f.createElement("ul",{className:"group-content"},t.map((e=>f.createElement(ft,{key:e.id,id:e.id})))))}function bt(e){const t=e.currentTarget.parentElement,n=t.hasAttribute("open"),r=wt(t.dataset.group);console.log(`${r}: ${!n}`),n?localStorage.removeItem(r):localStorage.setItem(r,"true")}function vt(){const[e,{loading:t,createNote:n}]=Ke(),[r,s]=w.exports.useState(null),o=function(e,t){const[n,r]=w.exports.useState([]),[s,o]=w.exports.useState(0),i=w.exports.useContext(Ve);if(w.exports.useEffect((()=>{t&&(o(0),r(e.filter((e=>t.matchesAny([e.id,e.title,e.group])))))}),[e,t]),!t)return e;const a=++Je;return setTimeout((async function(){if(a===Je)for(let a=s;a<e.length;a++){const s=e[a];if(n.includes(s))continue;const c=i.note(s.id);if(await c.hasCachedContent){const e=await c.read();if(t.matches(e)){o(a+1),r([...n,s]);break}}}}),10),n}(e,r),[i,c]=Xe("sidebarVisible"),[l,u]=Xe("sidebarWidth");if(st("newNote",n),st("hideSidebar",(()=>c(!i))),!i)return null;const h=r?{"data-filter":!0}:{};return f.createElement("aside",null,f.createElement("h4",{className:"filter"},f.createElement(pt,{onChange:s}),f.createElement(ct,{icon:"plus",onClick:n})),f.createElement("div",a({className:"notes-list"},h),t?f.createElement(Be,null):function(){const e=new Map,t=[...o.filter((e=>e.favorite)),...o.filter((e=>!e.favorite))];return t.map((t=>{var n;const{group:r}=t;return r?e.has(r)?(null==(n=e.get(r))||n.push(t),null):(e.set(r,[t]),r):t})).filter(Boolean).map((t=>{if("string"!=typeof t)return f.createElement(ft,{key:t.id,id:t.id});const n=t,r=e.get(n);return f.createElement(yt,{key:`group/${n}`,group:n,notes:r})}))}()),f.createElement(lt,{size:l,onChange:u}))}const{isHidden:Et,visibilitychange:xt}=function(){null==document.addEventListener&&Tt("Page Visibility API");if(null!=document.hidden)return{isHidden:"hidden",visibilitychange:"visibilitychange"};if(null!=document.msHidden)return{isHidden:"msHidden",visibilitychange:"msvisibilitychange"};if(null!=document.webkitHidden)return{isHidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"};Tt("Page Visibility API")}(),kt=b(window,"pageshow"),$t=b(window,"pagehide"),Ct=b(window,"freeze"),St=b(window,"resume"),Nt=b(window,"beforeunload"),At=b(document,xt).pipe(v((()=>!document[Et]))).pipe(E(kt.pipe(v((()=>!0))),$t.pipe(v((()=>!1))),Ct.pipe(v((()=>!0))),St.pipe(v((()=>!1))),Nt.pipe(v((()=>!1)))),x());function Tt(e){class t extends Error{constructor(e){super(`This feature requires a browser, such as Google Chrome or Firefox, that supports ${e}.`)}}throw new t(e)}function Pt(e){return new k((t=>e.subscribe((e=>t.next(e)))))}function Rt(){const[e,t]=w.exports.useState(!1);return w.exports.useEffect((()=>W(t))),e?f.createElement("div",{className:"business-indicator"},f.createElement(at,{name:"circle-notch",className:"business-indicator--icon"})):null}function Ot({language:e,value:t,gap:n,readonly:r,autofocus:s,onChange:o}){const i=w.exports.createRef(),a=$(),[c,l]=w.exports.useState(!0);return w.exports.useEffect((()=>{a&&i.current&&a.editor.colorizeElement(i.current,{theme:"vs-dark"})}),[a,i.current]),c?f.createElement("pre",{className:"mobile-fallback mobile-fallback--code",onClick:()=>l(!1)},f.createElement("code",{ref:i,lang:e,"data-lang":e},t)):f.createElement("textarea",{ref:e=>null==e?void 0:e.style.setProperty("--toolbar-height",`${n||0}px`),className:"mobile-fallback mobile-fallback--textarea",defaultValue:t,readOnly:r,autoFocus:s,autoComplete:"",onChange:e=>o(e.target.value)})}function jt({value:e,ext:t,gap:n,readonly:r,onChange:s}){const o=$(),[i]=Xe("rulers"),[l]=Xe("tabSize"),[u]=Xe("wordWrap"),[h]=Xe("renderIndentGuides"),d=e.split("\n").length,{extension:m}=Ae(e),p=function(e){if(!o)return null;const t=o.languages.getLanguages().find((t=>{var n;return null==(n=t.extensions)?void 0:n.includes(e)}));return null==t?void 0:t.id}(t||m)||"markdown";return O?f.createElement(Ot,c(a({},{gap:n,language:p,value:e,readonly:r,onChange:s}),{autofocus:!0})):f.createElement(C,{className:"editor",height:n?`calc(100vh - ${n}`:"100vh",theme:"vs-dark",language:p,value:e,options:(g="markdown"===p,{contextmenu:!1,minimap:{enabled:d>100},readOnly:r,renderIndentGuides:h,renderLineHighlight:"none",rulers:i,tabSize:l,wordBasedSuggestions:!g,wordWrap:u?"on":"off","semanticHighlighting.enabled":!0}),onChange:s,onMount:e=>e.focus()});var g}function It(e){const{title:t,content:n,ext:r,gap:s}=e,o=function(e){return"readonly"in e}(e)||!1,i=u(),l=u(),h=g(),d=Xe("autosave")[0]||0,[m,p]=function(e,t){const[n]=w.exports.useState([]);return w.exports.useEffect((()=>{void 0!==t&&n.push(t)}),[]),[n,function(t){n.unshift(t),n.length>e&&(n.length=e)}]}(5,n),[y,b]=w.exports.useState(!1),[x,k]=w.exports.useState(n),$=ut(1e3*d,(()=>{0!==d&&i()}));if(st("save",N),w.exports.useEffect((()=>{document.title=`${t}  ✏️  Pensieve`}),[t]),w.exports.useEffect((()=>{if(Dt(e)&&e.saveOnNavigation)return h.listen((()=>i()))})),w.exports.useEffect((()=>{m.includes(n)||(b(!1),k(n))}),[n]),w.exports.useEffect((()=>{if(!y)return;const e=At.subscribe((e=>{e||l()}));return()=>e.unsubscribe()})),null==x)return f.createElement(Be,null);const C=Pt(l).pipe(v((()=>({urgent:!0}))));return Pt(i).pipe(S(100),E(C)).subscribe((e=>y&&N(e||{}))),f.createElement("div",null,f.createElement(jt,c(a({},{ext:r,gap:s,value:x,readonly:o}),{onChange:function(t=""){Dt(e)||Lt();b(t!==n),k(t),e.onChange&&e.onChange(t),$.restart()}})),f.createElement(Rt,null));function N({urgent:t=!1}={}){Dt(e)||Lt(),$.stop(),p(x);const n=function(e){const t=e.replace(/ +\n| +$/g,"\n");if("\n"===t[t.length-1])return t;return`${t}\n`}(x);return p(n),e.onSave(n,{urgent:t})}}function Dt(e){return"onSave"in e}function Lt(){throw new Error("How the fuck did you get here???")}function Ft(){const{noteId:e}=N(),t=Ge(),[n,{loading:r,draft:s}]=gt(e),[o,i]=function(e){const t=w.exports.useContext(Ve),[n,r]=w.exports.useState(!0),[s,o]=w.exports.useState("");return w.exports.useEffect((()=>{o(""),n||r(!0);const s=t.note(e);return s.read().then(i),s.onContentChange(i)}),[e]),[s,function(n,s){r(!0),t.note(e).write(n,s)},n];function i(e){e!==s&&o(e||""),n&&r(!1)}}(e);return r?f.createElement(Be,null):n?f.createElement(It,{key:n.id,title:n.title,content:o,saveOnNavigation:!0,onChange:s,onSave:i}):(console.error(`Note ${e} not found`),t.goRoot(),null)}function qt(e){const[t,n]=w.exports.useState(!0),[r,s]=w.exports.useState("");return w.exports.useEffect((()=>{const t=()=>e.read().then((e=>s(e))).finally((()=>n(!1)));return t(),e.onChange(t)}),[]),[r,function(t,n){if(!function(e){try{return ke(e),!0}catch(t){return!1}}(t))return alert("Invalid JSON");e.write(t,n)},t]}function Mt(){const e=w.exports.useContext(Ve),[t,n]=w.exports.useState(0),[r,s,o]=qt(e.settings),[i,c,u]=qt(e.shortcuts),h=[{title:"Settings",content:r,loading:o,onSave:s},{title:"Shortcuts",content:i,loading:u,onSave:c},{title:"Default settings",content:xe(Te),loading:!1,readonly:!0},{title:"Default shortcuts",content:xe(Re),loading:!1,readonly:!0}],d=h[t],{loading:m}=d,p=l(d,["loading"]);return f.createElement("div",{className:"settings-editor"},f.createElement("nav",null,h.map(((e,t)=>f.createElement("div",{key:e.title,className:"tab",onClick:()=>n(t)},e.title)))),m?f.createElement(Be,null):f.createElement(It,a({key:p.title,gap:"33px",ext:".json"},p)))}function Ut(){const e=Ge();return st("settings",(()=>e.goSettings())),f.createElement(f.Fragment,null,f.createElement(A,{path:"/settings",component:Mt}),f.createElement(A,{path:e.note,component:Ft}))}const Ht=encodeURIComponent,zt=decodeURIComponent;function _t(e,t={}){const n=Object.entries(t).map((([e,t])=>`${Ht(e)}=${Ht(t)}`)).join("&");return n.length?`${e}?${n}`:e}function Gt(e){const[,t]=e.split("?");return t?Object.fromEntries(t.split("&").map((e=>{const[t,n]=e.split("=");return[zt(t),zt(n)]}))):{}}class Wt{constructor(e){this.rest=new re(e)}async fetchCurrentUsername(){return(await this.rest.GET("/user")).login}}const Bt="localhost"===location.hostname,Vt=new class{constructor(e){this.requestState=new d("notes.gh-state",{default:"init",version:1}),this.auth=new d("notes.gh-token",{default:null,version:1}),this.clientId=e.clientId,this.scope=e.scope,this.redirectUri=e.redirectUri,this.endpoint=e.endpoint}get token(){return this.auth.cache}get headers(){return{Authorization:`token ${this.token}`,Accept:"application/vnd.github.v3+json"}}get state(){return this.requestState.cache}requestGithubAuthorization(){const e=Math.random().toString().substr(2),t=_t("https://github.com/login/oauth/authorize",{client_id:this.clientId,scope:this.scope,redirect_uri:this.redirectUri,state:e});this.requestState.set(e),location.replace(t)}async processGithubAuthCode(e,t){if(t&&t!==this.state)throw new Error(`Request state do not match: "${t}" - "${this.state}`);e&&this.requestState.reset();const n=await this.requestAccessToken(e,t),{access_token:r}=Gt(`/?${n}`);return this.auth.set(r),r}requestAccessToken(e,t){const n=_t(this.endpoint,{redirect_uri:this.redirectUri,state:t,code:e});return K(n)}}({scope:"repo gist",endpoint:"https://pensieve.amatiasq.com/auth",clientId:Bt?"c55d2c46c215f9a4c3cb":"09580e62d66243b6b09d",redirectUri:Bt?location.origin:"https://pensieve.amatiasq.com/"}),Jt=new d("notes.gh-user",{default:null,version:1});function Kt(){const{code:e,state:t}=Gt(location.toString()),[n,r]=w.exports.useState(Vt.token&&Jt.cache?{token:Vt.token,username:Jt.cache}:null);return e?(history.replaceState(null,document.title,location.pathname),async function(e,t){const n=await Vt.processGithubAuthCode(e,t),r=new Wt(n),s=await r.fetchCurrentUsername();return Jt.set(s),{token:n,username:s}}(e,t).then(r),{}):n||(Vt.requestGithubAuthorization(),{})}function Qt(){const[e,t]=w.exports.useState(null),{token:n,username:r}=Kt(),s=Ge(),[o,i]=w.exports.useState(s.getPageName());return w.exports.useEffect((()=>{n&&r&&async function(e,t,n){const r=new oe(e,t,n);navigator.onLine&&await r.createIfNecessary("Database for notes",!0).catch((()=>null));const s=new he(p.createInstance({name:n})),o=new me(r),i=new ye(o),a=new pe(new ue(s,5,"local"),new ue(i,30,"remote"));return new He(a)}(n,r,"pensieve-data").then(t)}),[n]),w.exports.useEffect((()=>s.onNavigate((e=>i(e.getPageName()))))),e?f.createElement(Ve.Provider,{value:e},f.createElement("div",{className:`app page-${o}`},f.createElement(vt,null),f.createElement("main",null,f.createElement(Ut,null)))):f.createElement(Be,null)}const Xt=document.getElementById("app-container");if(!Xt)throw new Error("Missing container element");var Yt;Yt=Xt,T.exports.render(f.createElement(P,null,f.createElement(Qt,null)),Yt),U((e=>{e?Xt.classList.add("is-virtual-keyboard-open"):Xt.classList.remove("is-virtual-keyboard-open")}));
